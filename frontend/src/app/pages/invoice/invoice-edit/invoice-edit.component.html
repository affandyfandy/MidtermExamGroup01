<form *ngIf="invoice" (ngSubmit)="updateInvoice()" class="invoice-form">
    <h1>Edit Invoice</h1>
    <p>Can be edited ONLY before 10 minutes after invoice creation</p>
  
    <div class="form-group">
      <mat-form-field appearance="fill">
        <mat-label>Customer</mat-label>
        <mat-select [(ngModel)]="selectedCustomer" name="customer">
          <mat-option *ngFor="let customer of customers" [value]="customer">
            {{ customer.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  
    <div class="form-group">
      <h3>Invoice Products</h3>
      <div *ngFor="let product of invoiceProducts; let i = index">
        <mat-form-field appearance="fill">
          <mat-label>Product</mat-label>
          <mat-select [(ngModel)]="product.productId" (ngModelChange)="onProductChange(product)" name="product{{i}}">
            <mat-option *ngFor="let p of products" [value]="p.id">
              {{ p.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
  
        <mat-form-field appearance="fill">
          <mat-label>Quantity</mat-label>
          <input matInput type="number" [(ngModel)]="product.quantity" name="quantity{{i}}" (ngModelChange)="calculateAmount(product)" />
        </mat-form-field>
  
        <mat-form-field appearance="fill">
          <mat-label>Price</mat-label>
          <input matInput type="number" [(ngModel)]="product.price" name="price{{i}}" (ngModelChange)="calculateAmount(product)" />
        </mat-form-field>
  
        <mat-form-field appearance="fill">
          <mat-label>Amount</mat-label>
          <input matInput type="number" [value]="product.amount" name="amount{{i}}" readonly />
        </mat-form-field>
  
        <button type="button" (click)="removeProduct(i)" class="remove-product-btn">Remove</button>
      </div>
      <button type="button" (click)="addProduct()">Add Product</button>
    </div>
  
    <div class="form-group">
      <mat-form-field appearance="fill">
        <mat-label>Total Amount</mat-label>
        <input matInput type="number" [value]="getTotalAmount()" readonly />
      </mat-form-field>
    </div>
  
    <div class="form-group">
      <button mat-raised-button color="primary" type="submit">Save Changes</button>
      <button mat-button type="button" (click)="cancel()">Cancel</button>
    </div>
  </form>
  